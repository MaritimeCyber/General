<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     Ship Order Trends Widget ‚Äî shippauljobs.blogspot.com
     Í∏∞Îä•: Í∏ÄÎ°úÎ≤å Ïã†Ï°∞ÏÑ† Î∞úÏ£º Îâ¥Ïä§ Ïã§ÏãúÍ∞Ñ ÌëúÏãú
     Ï∂úÏ≤ò: Splash247 ¬∑ Hellenic Shipping News (RSS via rss2json)
     ÏÇ¨Ïö©: Blogger ‚Üí Î†àÏù¥ÏïÑÏõÉ ‚Üí HTML/ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ Í∞ÄÏ†ØÏóê Î∂ôÏó¨ÎÑ£Í∏∞
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<link
  href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap"
  rel="stylesheet"
/>

<style>
  #sot-wrap,
  #sot-wrap * {
    box-sizing: border-box;
    font-family: "Roboto", Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  @keyframes sot-pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.35;
    }
  }
  #sot-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    margin-bottom: 12px;
  }
  #sot-header-title {
    font-size: 17px;
    font-weight: 900;
    color: #424242;
    line-height: 1.2;
  }
  #sot-refresh-btn {
    display: inline-block;
    background: #1a9e82;
    color: #fff;
    font-size: 11.5px;
    font-weight: 700;
    padding: 2px 10px;
    border-radius: 20px;
    letter-spacing: 0.3px;
    vertical-align: middle;
    border: none;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  #sot-refresh-btn:hover:not(:disabled) {
    opacity: 0.82;
  }
  #sot-refresh-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  #sot-divider {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 14px;
  }
  .sot-divider-line {
    flex: 1;
    height: 1px;
    background: #e0e0e0;
  }
  .sot-divider-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #1a9e82;
    flex-shrink: 0;
  }
  #sot-tabs {
    display: flex;
    overflow-x: auto;
    border-bottom: 1px solid #e0e0e0;
    background: #f4faf8;
    padding: 0 6px;
    scrollbar-width: none;
    margin-bottom: 4px;
  }
  #sot-tabs::-webkit-scrollbar {
    display: none;
  }
  .sot-tab {
    flex: 0 0 20%;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    color: #9fb5c2;
    font-size: 13px;
    font-weight: 600;
    padding: 8px 10px;
    cursor: pointer;
    white-space: nowrap;
    text-align: center;
    transition: color 0.15s, border-color 0.15s;
  }
  .sot-tab:hover {
    color: #1a9e82;
  }
  .sot-tab.active {
    color: #1a9e82;
    border-bottom-color: #1a9e82;
  }
  #sot-loading {
    text-align: center;
    padding: 22px 10px;
    color: #6b8599;
    font-size: 12.5px;
    letter-spacing: 0.3px;
    animation: sot-pulse 1.6s ease-in-out infinite;
  }
  #sot-list {
    display: none;
    max-height: 440px;
    overflow-y: auto;
    padding: 4px 0;
  }
  .sot-item {
    padding: 10px 0;
    border-bottom: 1px solid #e0e0e0;
  }
  .sot-item:last-child {
    border-bottom: none;
  }
  .sot-meta {
    display: flex;
    align-items: center;
    gap: 7px;
    margin-bottom: 4px;
  }
  .sot-date {
    font-size: 11px;
    color: #9fb5c2;
  }
  .sot-src {
    display: inline-block;
    background: #e8f6f3;
    color: #1a9e82;
    font-size: 10.5px;
    font-weight: 700;
    padding: 1px 7px;
    border-radius: 10px;
    letter-spacing: 0.3px;
  }
  .sot-title {
    display: block;
    font-size: 13px;
    font-weight: 700;
    color: #424242;
    text-decoration: none;
    line-height: 1.7;
    margin-bottom: 2px;
  }
  .sot-title:hover {
    color: #1a9e82;
  }
  .sot-snippet {
    font-size: 11.5px;
    color: #9fb5c2;
    line-height: 1.7;
  }
  .sot-empty {
    padding: 22px 0;
    font-size: 13px;
    color: #9fb5c2;
    text-align: center;
  }
  #sot-footer {
    margin-top: 13px;
    padding: 9px 12px;
    background: #f4faf8;
    border-left: 3px solid #1a9e82;
    border-radius: 4px;
    font-size: 12px;
    color: #5a7080;
    line-height: 1.7;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
</style>

<div id="sot-wrap">
  <!-- Ìó§Îçî -->
  <div id="sot-header">
    <span id="sot-header-title">üö¢ Ship Order Trends</span>
    <button id="sot-refresh-btn">‚ü≥ Refresh</button>
  </div>

  <!-- Íµ¨Î∂ÑÏÑ† -->
  <div id="sot-divider">
    <div class="sot-divider-line"></div>
    <div class="sot-divider-dot"></div>
    <div class="sot-divider-line"></div>
  </div>

  <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ÌÉ≠ -->
  <div id="sot-tabs">
    <button class="sot-tab active" data-key="all">All</button>
    <button class="sot-tab" data-key="tanker">Tanker</button>
    <button class="sot-tab" data-key="container">Container</button>
    <button class="sot-tab" data-key="lng">LNG / Gas</button>
    <button class="sot-tab" data-key="bulk">Bulk</button>
    <button class="sot-tab" data-key="car">Car Carrier</button>
  </div>

  <!-- Î°úÎî© -->
  <div id="sot-loading">üì° Fetching latest ship orders‚Ä¶</div>

  <!-- Îâ¥Ïä§ Î™©Î°ù -->
  <div id="sot-list"></div>

  <!-- Ìë∏ÌÑ∞ -->
  <div id="sot-footer">
    <span>Splash247 ¬∑ Hellenic Shipping News</span>
    <span id="sot-updated">‚Äî</span>
  </div>
</div>

<script>
(function () {
  /* ‚îÄ‚îÄ A) Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§ ‚îÄ‚îÄ */
  var FEEDS = [
    {
      url: "https://splash247.com/feed/",
      name: "Splash247",
    },
    {
      url: "https://www.hellenicshippingnews.com/feed/",
      name: "HSN",
    },
  ];

  /* ‚îÄ‚îÄ B) Î∞úÏ£º Í¥ÄÎ†® ÌÇ§ÏõåÎìú (Ï†úÎ™©/Î≥∏Î¨∏ ÌïÑÌÑ∞) ‚îÄ‚îÄ */
  var ORDER_KW = [
    "order",
    "newbuilding",
    "new build",
    "contract",
    "shipbuild",
    "keel lay",
    "yard",
  ];

  /* ‚îÄ‚îÄ C) Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÌÇ§ÏõåÎìú ‚îÄ‚îÄ */
  var CAT_KW = {
    all: [],
    tanker: [
      "tanker",
      "vlcc",
      "suezmax",
      "aframax",
      "product tanker",
      "crude",
      "chemical tanker",
      "mr tanker",
    ],
    container: [
      "container",
      "teu",
      "boxship",
      "containership",
      "feeder",
      "ultra large",
    ],
    lng: [
      "lng",
      "lpg",
      "fsru",
      "flng",
      "gas carrier",
      "liquefied",
      "ammonia",
      "methanol",
    ],
    bulk: [
      "bulker",
      "bulk carrier",
      "capesize",
      "panamax",
      "handysize",
      "handymax",
      "ultramax",
      "kamsarmax",
    ],
    car: [
      "pctc",
      "car carrier",
      "roro",
      "ro-ro",
      "vehicle carrier",
      "pcctc",
      "pure car",
    ],
  };

  var allItems = [];
  var activeTab = "all";

  /* ‚îÄ‚îÄ D) RSS ‚Üí JSON (rss2json.com Î¨¥Î£å API) ‚îÄ‚îÄ */
  function fetchFeed(feed) {
    var api =
      "https://api.rss2json.com/v1/api.json?count=30&rss_url=" +
      encodeURIComponent(feed.url);
    return fetch(api)
      .then(function (r) {
        if (!r.ok) throw new Error("HTTP " + r.status);
        return r.json();
      })
      .then(function (d) {
        return (d.items || []).map(function (i) {
          return Object.assign({}, i, { _src: feed.name });
        });
      })
      .catch(function () {
        return []; /* Í∞úÎ≥Ñ ÌîºÎìú Ïã§Ìå® Ïãú Îπà Î∞∞Ïó¥ Î∞òÌôò */
      });
  }

  /* ‚îÄ‚îÄ E) ÌïÑÌÑ∞ Ìï®Ïàò ‚îÄ‚îÄ */
  function isOrderNews(item) {
    var txt =
      ((item.title || "") + " " + (item.description || "")).toLowerCase();
    return ORDER_KW.some(function (k) {
      return txt.indexOf(k) !== -1;
    });
  }

  function matchesCat(item, cat) {
    if (cat === "all") return true;
    var txt =
      ((item.title || "") + " " + (item.description || "")).toLowerCase();
    return CAT_KW[cat].some(function (k) {
      return txt.indexOf(k) !== -1;
    });
  }

  /* ‚îÄ‚îÄ F) Ïú†Ìã∏ ‚îÄ‚îÄ */
  function fmtDate(ds) {
    var d = new Date(ds);
    if (isNaN(d.getTime())) return "";
    return d.toLocaleDateString("en-GB", {
      day: "2-digit",
      month: "short",
      year: "numeric",
    });
  }

  function stripHTML(h) {
    var t = document.createElement("div");
    t.innerHTML = h || "";
    return (t.textContent || t.innerText || "").replace(/\s+/g, " ").trim();
  }

  function escAttr(s) {
    return (s || "").replace(/"/g, "&quot;").replace(/</g, "&lt;");
  }

  /* ‚îÄ‚îÄ G) Î†åÎçîÎßÅ ‚îÄ‚îÄ */
  function render() {
    var list = document.getElementById("sot-list");
    var filtered = allItems.filter(function (i) {
      return matchesCat(i, activeTab);
    });

    if (!filtered.length) {
      list.innerHTML =
        '<div class="sot-empty">No order news found in this category.<br>Try "All" or refresh for latest data.</div>';
      return;
    }

    list.innerHTML = filtered
      .slice(0, 12)
      .map(function (i) {
        var snippet = stripHTML(i.description);
        if (snippet.length > 115) snippet = snippet.slice(0, 115) + "‚Ä¶";
        return (
          '<div class="sot-item">' +
          '<div class="sot-meta">' +
          '<span class="sot-date">' +
          fmtDate(i.pubDate) +
          "</span>" +
          '<span class="sot-src">' +
          i._src +
          "</span>" +
          "</div>" +
          '<a class="sot-title" href="' +
          escAttr(i.link) +
          '" target="_blank" rel="noopener">' +
          i.title +
          "</a>" +
          '<div class="sot-snippet">' +
          snippet +
          "</div>" +
          "</div>"
        );
      })
      .join("");
  }

  /* ‚îÄ‚îÄ H) ÏÉàÎ°úÍ≥†Ïπ® ‚îÄ‚îÄ */
  function refresh() {
    var btn = document.getElementById("sot-refresh-btn");
    var loading = document.getElementById("sot-loading");
    var list = document.getElementById("sot-list");
    var upd = document.getElementById("sot-updated");

    btn.disabled = true;
    btn.textContent = "‚ü≥";
    loading.style.display = "block";
    list.style.display = "none";

    Promise.all(FEEDS.map(fetchFeed))
      .then(function (results) {
        var merged = [];
        results.forEach(function (arr) {
          arr.forEach(function (i) {
            merged.push(i);
          });
        });
        allItems = merged
          .filter(isOrderNews)
          .sort(function (a, b) {
            return new Date(b.pubDate) - new Date(a.pubDate);
          });

        render();

        var now = new Date();
        upd.textContent =
          "Updated " +
          now.toLocaleTimeString("en-GB", {
            hour: "2-digit",
            minute: "2-digit",
          });
      })
      .catch(function () {
        list.innerHTML =
          '<div class="sot-empty">‚ö†Ô∏è Failed to load data. Please try again.</div>';
        list.style.display = "block";
      })
      .then(function () {
        /* finally ÎåÄÏ≤¥ */
        loading.style.display = "none";
        list.style.display = "block";
        btn.disabled = false;
        btn.textContent = "‚ü≥ Refresh";
      });
  }

  /* ‚îÄ‚îÄ I) Ïù¥Î≤§Ìä∏ Î∞îÏù∏Îî© ‚îÄ‚îÄ */
  document
    .getElementById("sot-refresh-btn")
    .addEventListener("click", refresh);

  document.querySelectorAll("#sot-tabs .sot-tab").forEach(function (tab) {
    tab.addEventListener("click", function () {
      document.querySelectorAll("#sot-tabs .sot-tab").forEach(function (t) {
        t.classList.remove("active");
      });
      this.classList.add("active");
      activeTab = this.dataset.key;
      render();
    });
  });

  /* ‚îÄ‚îÄ J) Ï¥àÍ∏∞ Î°úÎìú ‚îÄ‚îÄ */
  refresh();
})();
</script>
